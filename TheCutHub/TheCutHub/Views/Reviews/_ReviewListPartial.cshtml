@using X.PagedList.Web.Common
@model IPagedList<TheCutHub.Models.Review>
@if (!Model.Any())
{
    <p><em>No reviews yet.</em></p>
}
else
{
    foreach (var review in Model)
    {
        <div class="mb-3 border-bottom pb-2">
            <strong>@review.User?.UserName</strong> – @review.Rating ★<br />
            <p>@review.Comment</p>

            @if ((User.Identity.IsAuthenticated && User.Identity.Name == review.User?.UserName)||User.IsInRole("Administrator"))
            {
                <form asp-controller="Reviews" asp-action="Delete" method="post" class="d-inline">
                    @Html.AntiForgeryToken()
                    <input type="hidden" name="id" value="@review.Id" />
                    <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                </form>
            }
        </div>
    }
}


<div class="mt-3">
    @Html.PagedListPager(
      Model,
      page => Url.Action("List", "Reviews", new { barberId = ViewBag.BarberId, page }),
      new PagedListRenderOptions
      {
          Display = X.PagedList.Web.Common.PagedListDisplayMode.IfNeeded
      })
</div>
